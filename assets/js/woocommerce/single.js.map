{"version":3,"sources":["before.js","single.js","after.js"],"names":["$","OpalWoocommerceSingleProduct","_this","this","_classCallCheck","document","ready","initSlideProduct","window","resize","_createClass","key","value","$slider","find","css","display","$fbtProducts","length","priceAt","$button","totalPrice","parseFloat","data","on","id","val","closest","toggleClass","currentPrice","hasClass","addClass","removeClass","$product_ids","each","html","formatNumber","$singleBtn","ajax","url","ajaxurl","method","action","product_ids","attr","location","currentURL","success","response","wc_add_to_cart_params","cart_redirect_after_add","number","n","x1","x","x2","decimal","rgx","test","replace","thousand","currency_pos","currency","jQuery"],"mappings":"8XAAA,SAAAA,GC4HA,ID5HA,WCCA,QAAAC,KAAA,GAAAC,GAAAC,IAAAC,iBAAAD,KAAAF,GAEAD,EAAAK,UAAAC,MAAA,WACAJ,EAAAK,qBDJAP,EAAAQ,QAAAC,OAAA,WAAAP,EAAAK,qBAAA,MAAAG,cAAAT,IAAAU,IAAA,mBAAAC,MAAA,WCYA,GAAAC,GAAAb,EAAA,uCATAA,EAAAA,EAAAA,KAAAA,kBAAAA,OACAa,GAAAC,KAAA,2CACAC,KACAf,YAAAA,EACAgB,QAAA,aDPAL,IAAA,mBAAAC,MAAA,WCYA,GAAAK,GAAAjB,EAAA,0BAAA,MAAAiB,EAAAC,QAAA,GAAA,CAKA,GAAAC,GAAAF,EAAAH,KAAA,8CAFAM,EAAAH,EAAAH,KAAA,2BAIAO,EAAAC,WAAAL,EAAAH,KAAA,mBAAAS,KAAA,SAaAN,GAAAM,KAAA,YAXAN,EAAAM,KAAA,YAaAN,EAAAM,KAAA,WDlCAN,EAAAM,KAAA,kBAAAN,EAAAM,KAAA,eCsCAN,GAAAH,KAAA,wBAAAU,GAAA,SAAA,WAdA,GAAAC,GAAAzB,EAAAG,MAAAuB,KAgBA1B,GAAAG,MAAAwB,QAAA,MAAAC,YAAA,UAdA,IAAAC,GAAAP,WAAAtB,EAAAG,MAAAwB,QAAA,MAAAb,KAAA,kBAAAS,KAAA,SACAvB,GAAAG,MAAAwB,QAAA,MAAAG,SAAA,YACAb,EAAAH,KAAA,gBAAAW,GAAAM,SAAA,aACAV,GAAAQ,IAAAZ,EAAAH,KAAA,gBAAAW,GAAAO,YAAA,aAAAX,GAAAQ,EAAA,IAAAI,GAAA,GAuBAhB,GAAAH,KAAA,oBAAAoB,KAAA,WAdAjB,EAAAA,MAAAA,SAAAA,aACAgB,GAAA,IAAAjC,EAAAG,MAAAW,KAAA,wBAAAY,SAIAT,EAAAA,KAAAA,QAAAA,GAGAE,EAAAgB,KAAAhC,KAAAiC,aAAAf,MAkBAJ,EAAAO,GAAA,QAAA,2CAAA,WAbA,GAAAa,GAAArC,EAAAG,KACAc,GAAAA,SAAAA,UAEAgB,IAAAA,GAAAA,OAAAA,SAAAA,IAEAjC,GAAAsC,MAeAC,IAAAC,QAbApB,SAAAA,OAeAqB,OAAA,OAbAtB,MACAuB,OAAA,kCAeAC,YAAAN,EAAAO,KAAA,UAZA3B,MAAAA,WACAT,OAAAqC,SAAAC,GAgBAC,QAAA,SAAAC,GAbA,GAAA,mBAAAC,wBAeA,QAAAA,sBAAAC,wBAZAX,YADAvC,OAAAA,SAAAA,sBAAAA,SAKA0C,GAAAA,SAAAA,MAAAA,QAAAA,kBACAC,EAAAA,SAAAA,MAAAA,GAAAA,yBAAAA,WAFAN,EAAAL,YAAA,sBD1EArB,IAAA,eAAAC,MAAA,SCuFAuC,GAeA,GAAAC,GAAAD,CAbAnD,IAAAA,SAAAA,gBAAAA,EAAAA,CACAA,EAAAA,EAAAA,QAAAA,gBAAAA,EAOA,KANAqC,GAAAA,GAAAA,EAAAA,MAAAA,KACAgB,EAAAC,EAAA,GAEAC,EAAAD,EAAApC,OAAA,EAAAsC,QAAAF,EAAA,GAAA,GAxBAG,EAAA,eA2BAA,EAAAC,KAAAL,IAEAA,EAAAA,EAAAM,QAAAF,EAAA,KAAAG,SAAA,KDnGAR,GAAAC,EAAAE,ECyGA,OAAAM,cACA,IAAA,OAAA,MAAAC,UAAAV,CAGA,KAAA,QACAC,MAAAA,GAAAA,QAcA,KAAA,aAXAD,MAAAA,UAAAA,IAAAA,CAcA,KAAA,cAVA,MAAAA,GAAA,IAAAU,cDrHA7D,OEAA8D","file":"single.js","sourcesContent":["(function ($) {"," class OpalWoocommerceSingleProduct {\n     constructor() {\n\n         $(document).ready(() => {\n             this.initSlideProduct();\n         });\n         $(window).resize(() => {\n             this.initSlideProduct();\n         })\n     }\n\n     initSlideProduct() {\n         let $slider    = $('.single-product div.product .images'),\n             $widthwrap = $slider.find('.flex-viewport').width(),\n             $image     = $slider.find('.woocommerce-product-gallery__image > a');\n         $image.css({\n             'max-width': $widthwrap,\n             'display'  : 'block'\n         })\n     }\n\n    //product Together Select\n    productTogerther(){\n\n        var $fbtProducts = $('.opal-frequently-bought');\n\n        if ( $fbtProducts.length <= 0 ) {\n            return;\n        }\n        var priceAt = $fbtProducts.find('.otf-total-price .woocommerce-Price-amount'),\n            $button = $fbtProducts.find('.otf_add_to_cart_button'),\n            totalPrice = parseFloat($fbtProducts.find('#otf-data_price').data('price')),\n            currency = $fbtProducts.data('currency'),\n            thousand = $fbtProducts.data('thousand'),\n            decimal = $fbtProducts.data('decimal'),\n            price_decimals = $fbtProducts.data('price_decimals'),\n            currency_pos = $fbtProducts.data('currency_pos');\n\n        $fbtProducts.find('input[type=checkbox]').on('change', function () {\n            let id = $(this).val();\n            $(this).closest('li').toggleClass('uncheck');\n            let currentPrice = parseFloat($(this).closest('li').find('.product-price').data('price'));\n            if ($(this).closest('li').hasClass('uncheck')) {\n                $fbtProducts.find('#fbt-product-' + id).addClass('un-active');\n                totalPrice -= currentPrice;\n\n            } else {\n                $fbtProducts.find('#fbt-product-' + id).removeClass('un-active');\n                totalPrice += currentPrice;\n            }\n\n            let $product_ids = '0';\n            $fbtProducts.find('.product-list li').each(function () {\n                if (!$(this).hasClass('uncheck')) {\n                    $product_ids += ',' + $(this).find('input[type=checkbox]').val();\n                }\n            });\n\n            $button.attr('value', $product_ids);\n\n            priceAt.html( this.formatNumber( totalPrice) );\n        });\n\n        // Add to cart ajax\n        $fbtProducts.on('click', '.otf_add_to_cart_button.ajax_add_to_cart', function() {\n            var $singleBtn = $(this);\n            $singleBtn.addClass('loading');\n\n            var currentURL = window.location.href;\n\n            $.ajax({\n                url     : ajaxurl,\n                dataType: 'json',\n                method  : 'post',\n                data    : {\n                    action     : 'otf_woocommerce_fbt_add_to_cart',\n                    product_ids: $singleBtn.attr('value')\n                },\n                error   : function() {\n                    window.location = currentURL;\n                },\n                success : function(response) {\n                    if ( typeof wc_add_to_cart_params !== 'undefined' ) {\n                        if ( wc_add_to_cart_params.cart_redirect_after_add === 'yes' ) {\n                            window.location = wc_add_to_cart_params.cart_url;\n                            return;\n                        }\n                    }\n\n                    $(document.body).trigger('updated_wc_div');\n                    $(document.body).on('wc_fragments_refreshed', function() {\n                        $singleBtn.removeClass('loading');\n                    });\n\n                }\n            });\n\n        });\n\n    }\n\n     formatNumber(number) {\n         let n = number;\n         if (parseInt(price_decimals) > 0) {\n             number = number.toFixed(price_decimals) + '';\n             var x = number.split('.');\n             var x1 = x[0],\n                 x2 = x.length > 1 ? decimal + x[1] : '';\n             var rgx = /(\\d+)(\\d{3})/;\n             while (rgx.test(x1)) {\n                 x1 = x1.replace(rgx, '$1' + thousand + '$2');\n             }\n\n             n = x1 + x2\n         }\n\n\n         switch (currency_pos) {\n             case 'left' :\n                 return currency + n;\n                 break;\n             case 'right' :\n                 return n + currency;\n                 break;\n             case 'left_space' :\n                 return currency + ' ' + n;\n                 break;\n             case 'right_space' :\n                 return n + ' ' + currency;\n                 break;\n         }\n     }\n\n}\n\nnew OpalWoocommerceSingleProduct();","})(jQuery);"]}